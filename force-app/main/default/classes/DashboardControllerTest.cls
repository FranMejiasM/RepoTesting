@ISTEST
PUBLIC CLASS DASHBOARDCONTROLLERTEST {

    PRIVATE CLASS MOCKOK IMPLEMENTS HTTPCALLOUTMOCK {
        PUBLIC HTTPRESPONSE RESPOND(HTTPREQUEST REQ) {
            IF (REQ.GETENDPOINT().CONTAINS('/SCAN?FILTER[URL]=')) {
                HTTPRESPONSE RES = NEW HTTPRESPONSE();
                RES.SETBODY('{"META":{"CURRENT-PAGE":1,"PER-PAGE":1,"FROM":1,"TO":1,"TOTAL":3,"LAST-PAGE":3,'+
                '"TOTAL_RESOURCES":3,"RESOURCES_PER_PAGE":1},"LINKS":{"FIRST":'+
                '"HTTPS://SERVICES-DEVELOPMENT.QUALITYCLOUDS.COM/API/V2/SCAN?FILTER%5BURL%5D=706&'+
                'FILTER%5BSTATUS%5D=LOADED&FILTER%5BSCAN_TYPE%5D=0&PAGE%5BNUMBER%5D=1&PAGE%5BSIZE%5D=1",'+
                '"NEXT":"HTTPS://SERVICES-DEVELOPMENT.QUALITYCLOUDS.COM/API/V2/SCAN?FILTER%5BURL%5D=706&'+
                'FILTER%5BSTATUS%5D=LOADED&FILTER%5BSCAN_TYPE%5D=0&PAGE%5BNUMBER%5D=2&PAGE%5BSIZE%5D=1",'+
                '"LAST":"HTTPS://SERVICES-DEVELOPMENT.QUALITYCLOUDS.COM/API/V2/SCAN?FILTER%5BURL%5D=706&'+
                'FILTER%5BSTATUS%5D=LOADED&FILTER%5BSCAN_TYPE%5D=0&PAGE%5BNUMBER%5D=3&PAGE%5BSIZE%5D=1"},'+
                '"DATA":[{"TYPE":"SCAN","ID":"A961F1D8-0AC7-48E6-BE95-ACE2C56AA37A","ATTRIBUTES":{'+
                '"URL":"HTTPS://QUALITYCLOUDS4-DEV-ED--C.VISUALFORCE.COM","TARGET":"6","CUSTOMER-ID":2187,'+
                '"USER-ID":872,"SCAN-DATE":"2021-07-01 09:40:55","INTERNAL-CODE":0,"EXIT-CODE":0,'+
                '"STATUS":"SUCCESS","PROCESS-TIME":"796.00","NUMBER-OF-ISSUES":874,"TECHNICAL-DEBT":"350.0",'+
                '"QUALITY-OF-CLOUD":"96.00","BEST-PRACTICES-NUMBER":182,"SCANNED-CONFIGURATION-ELEMENTS":1352,'+
                '"CODE-LINES":4165,"CHANGES-ISSUES-RATIO":"6.59","CODE-CHANGES-ISSUES-RATIO":"78.38",'+
                '"ADMINISTRATORS":NULL,"USERS":NULL,"INSTANCE-BUILD-DATE":NULL,"LAST-UPGRADE-DATE":NULL,'+
                '"LAST-UPDATE-SET-DATE":NULL,"ISSUES-VARIATION":"-72.26","TECHNICAL-DEBT-VARIATION":"-79.58",'+
                '"QUALITY-OF-CLOUD-VARIATION":"10.34","CODE-LINES-ADDED":4165,'+
                '"ENGINE-VERSION":"21.2.2.0-SNAPSHOT","CUSTOMER-NAME":"TEST ",'+
                '"IS-PROFILING":FALSE,"SERVICE-ID":2,"SCAN-TYPE":0,"SCAN-DETAILS":"[INFO] RECOVERING'+
                ' INFORMATION OF THE INSTANCE ID = 706<BR><BR>[INFO] INFORMATION OF THE INSTANCE'+
                ' RECOVERED SUCCESFULLY<BR><BR>[INFO] SNAPSHOT GENERATION STARTED<BR><BR>[INFO]'+
                ' SNAPSHOT GENERATION FINISHED<BR><BR>[INFO] NUMBER OF API CALLS: 658<BR><BR>[INFO]'+
                ' STARTING CONFIGURATION VS CUSTOMISATION CALCULATION<BR><BR>[INFO] FINISHED'+
                ' CONFIGURATION VS CUSTOMISATION CALCULATION<BR><BR>[INFO] RECOVERING THE INFORMATION'+
                ' OF THE BEST PRACTICES<BR><BR>[INFO] THE INFORMATION OF THE BEST PRACTICES WAS'+
                ' RECOVERED: 215 PRACTICES<BR><BR>[INFO] EXECUTING PMD RULES<BR><BR>[INFO] PMD'+
                ' FINISHED EXECUTION<BR><BR>[INFO] EXECUTING QUALITY CLOUDS RULES<BR><BR>[INFO]'+
                ' QUALITY CLOUDS RULES EXECUTED<BR><BR>[INFO] STARTING METADATA GENERATION'+
                '<BR><BR>[INFO] METADATA GENERATED SUCCESFULLY<BR><BR>[INFO] THE DELTA ISSUES'+
                ' WERE SAVED SUCCESFULLY<BR><BR>[INFO] THE SNAPSHOTS WERE SAVED SUCCESFULLY'+
                '<BR><BR>[INFO] DELTA ELEMENTS WERE SAVED SUCCESFULLY<BR><BR>[INFO] THE'+
                ' DUPLICATES WERE SAVED SUCCESFULLY<BR><BR>[INFO] THE LICENSE INFORMATION WAS'+
                ' SAVED SUCCESFULLY<BR><BR>[INFO] THE SCAN WAS SAVED SUCCESFULLY<BR><BR>[INFO]'+
                ' STARTING QUALITY GATE CALCULATION<BR><BR>[INFO] QUALITY GATE CALCULATION FINISHED'+
                ' SUCCESSFULLY","STATUS-DETAIL":"SUCCESS","INSTANCE-ID":706,"SHORT-ID":10474,'+
                '"VERSION":"SUMMER 21","PATCH":NULL,"EDITION":"DEVELOPER EDITION",'+
                '"API-VERSION":"52.0","QUALITY-GATE-DEFINITION-NAMEID":'+
                '"0FBBD964-FCA3-4BF5-BADD-968C2F08A454","QUALITY-GATE-RESULT":"FAIL",'+
                '"QUALITY-GATE-MESSAGE":"QUALITY GATE DOES NOT ALLOW CODE WITH ANY NEW ISSUES.'+
                ' MAKE SURE YOU SOLVE THESE FIRST.","IS-BASELINE":FALSE},"LINKS":{'+
                '"SELF":"HTTP://SERVICES-DEVELOPMENT.QUALITYCLOUDS.COM/API/V2/SCAN/'+
                'A961F1D8-0AC7-48E6-BE95-ACE2C56AA37A","RELATED":{"HREF":'+
                '"HTTP://SERVICES-DEVELOPMENT.QUALITYCLOUDS.COM/API/V2/ISSUE/?FILTER[SCAN]'+
                '=A961F1D8-0AC7-48E6-BE95-ACE2C56AA37A",'+
                '"META":{"TOTAL-WARNINGS":0,"TOTAL-WRITE-OFFS":0}}}}]}');
                RES.SETSTATUSCODE(200);
                RETURN RES;
            } ELSE IF (REQ.GETENDPOINT().CONTAINS('/SALESFORCE-INSTANCE/')) {
                HTTPRESPONSE RES = NEW HTTPRESPONSE();
                RES.SETBODY('{"DATA":{"TYPE":"SALESFORCE-INSTANCE","ID":"706",'+
                '"ATTRIBUTES":{"DESCRIPTION":"6","ENVIRONMENT-ID":1,'+
                '"ENVIRONMENT":"DEVELOPMENT","SERVICE-NAME":"SALESFORCE",'+
                '"URL":"HTTPS://QUALITYCLOUDS4-DEV-ED--C.VISUALFORCE.COM",'+
                '"LOGIN-URL":"HTTPS://QUALITYCLOUDS4-DEV-ED--C.VISUALFORCE.COM",'+
                '"LAST-SCAN-TEST-RESULT":"SUCCESS","LAST-SCAN-TEST-DATETIME":'+
                '"2021-07-01 09:42:36","LAST-SCAN-TEST-DETAILS":"SUCCESS",'+
                '"TARGET":"ORG","IS-FEATURE-BRANCH":FALSE,"GIT-FLAVOR-ID":NULL,'+
                '"GIT-REPOSITORY-URL":NULL,"GIT-BRANCH":NULL,"GO-LIVE":NULL,'+
                '"DONT-PERSIST-CREDENTIALS":FALSE,"SALESFORCE-LOGIN-URL":'+
                '"HTTPS://QUALITYCLOUDS4-DEV-ED--C.VISUALFORCE.COM/SERVICES/'+
                'OAUTH2/AUTHORIZE?RESPONSE_TYPE=CODE&CLIENT_ID=TSGV7PRCWOXU'+
                '3NS2NZW4K5HYEKAFBQ84HCPWQ1TS4L9YIW18E7XZJPUHIBQZGGFNJD4UAQ'+
                'IEIWWBUZJQ6RNOGCNZM40AFEVOFRYR&'+
                'REDIRECT_URI=HTTPS://SERVICES-DEVELOPMENT.QUALITYCLOUDS.COM/SF_INSTANCE/'+
                'CODE_CALLBACK&STATE=706&DISPLAY=POPUP&PROMPT=LOGIN&SCOPE=API%20REFRESH_TOKEN",'+
                '"ORG-ID":"00D5Y000001DBMPUAI","ACTIVE":TRUE,"QUALITY-GATE-STATUS":"ACTIVE",'+
                '"NUM-ALERTS":0,"AUTOAPPROVED-WRITEOFFS":FALSE,"HAS-QUALITY-GATES":TRUE,'+
                '"HAS-QUALITY-GATES-WITH-SCAN":TRUE},'+
                '"LINKS":{"SELF":"HTTP://SERVICES-DEVELOPMENT.QUALITYCLOUDS.COM/API/V2/SALESFORCE-INSTANCE/706"}}}');
                RES.SETSTATUSCODE(200);
                RETURN RES;
            } ELSE IF (REQ.GETENDPOINT().CONTAINS('/CUST-VS-CONFIG-COMPACT/')) {
                HTTPRESPONSE RES = NEW HTTPRESPONSE();
                RES.SETBODY('{"TREND":[{"DATA":[{"SCANID":10121,"LABEL":"2021-05-03T15:29:12Z","VALUE":"35.97"}'+
                ',{"SCANID":10168,"LABEL":"2021-05-11T15:11:39Z","VALUE":"39.46"},{"SCANID":10179,'+
                '"LABEL":"2021-05-13T11:01:05Z","VALUE":"39.86"},{"SCANID":10474,'+
                '"LABEL":"2021-07-01T09:40:55Z","VALUE":"38.96"}],"NAME":"CUSTOMIZATION'+
                ' VS CONFIGURATION RATIO"}],"VARIATION":-35.21,"INVERSEVARIATION":TRUE,'+
                '"VALUE":"38.96","CONFIGURATIONRATIO":"61.04","BENCHMARK":"40.31"}');
                RES.SETSTATUSCODE(200);
                RETURN RES;
            } ELSE IF (REQ.GETENDPOINT().CONTAINS('/ISSUES-OVER-TIME-COMPACT/')) {
                HTTPRESPONSE RES = NEW HTTPRESPONSE();
                RES.SETBODY('{"TREND":[{"DATA":[{"SCANID":10121,"LABEL":"2021-05-03T15:29:12Z","VALUE":"3093"}'+
                ',{"SCANID":10168,"LABEL":"2021-05-11T15:11:39Z","VALUE":"3110"},{"SCANID":10179,'+
                '"LABEL":"2021-05-13T11:01:05Z","VALUE":"3151"},{"SCANID":10474,'+
                '"LABEL":"2021-07-01T09:40:55Z","VALUE":"874"}],"NAME":"ISSUES OVER TIME TREND"}],'+
                '"VARIATION":-72.26,"INVERSEVARIATION":TRUE,"VALUE":874,"AVERAGE":1762,"ISSUESWRITTENOFF":0,'+
                '"PREVIOUS":3151,"BASELINE":874,"DATAPRIVACY":0,"BESPOKERULES":0,"DEFAULTNAMESPACE":874,'+
                '"NUMOPENISSUES":19,"NUMCLOSEDISSUES":2296,"NUMISSUESBYGROUPTYPE":'+
                '[{"LABEL":"ORG.CONFIG","VALUE":"10"},{"LABEL":"APEX","VALUE":"725"},'+
                '{"LABEL":"OTHERS","VALUE":"139"}]}');
                RES.SETSTATUSCODE(200);
                RETURN RES;
            } ELSE IF (REQ.GETENDPOINT().CONTAINS('/TECH-DEBT-COMPACT/')) {
                HTTPRESPONSE RES = NEW HTTPRESPONSE();
                RES.SETBODY('{"TREND":[{"DATA":[{"SCANID":10121,"LABEL":"2021-05-03T15:29:12Z",'+
                '"VALUE":"1683.9"},{"SCANID":10168,"LABEL":"2021-05-11T15:11:39Z","VALUE":"1688.7"}'+
                ',{"SCANID":10179,"LABEL":"2021-05-13T11:01:05Z","VALUE":"1713.7"},{"SCANID":10474,'+
                '"LABEL":"2021-07-01T09:40:55Z","VALUE":"350.1"}],"NAME":"TECHNICAL DEBT TREND"}],'+
                '"VARIATION":-79.57,"INVERSEVARIATION":TRUE,"VALUE":350.1,"AVERAGE":848.0,"PREVIOUS":1713.7,'+
                '"BASELINE":350.0,"NUMGLOBAL":1050.25,"DEFAULTNAMESPACE":350.0,'+
                '"NUMNEWTECHDEBT":12.9,"NUMCLOSEDTECHDEBT":1376.5}');
                RES.SETSTATUSCODE(200);
                RETURN RES;
            } ELSE IF (REQ.GETENDPOINT().CONTAINS('/ISSUES-BY-SCAN/')) {
                HTTPRESPONSE RES = NEW HTTPRESPONSE();
                RES.SETBODY('{"DATA":[{"DATA":[{"SCANID":10474,"LABEL":"HIGH","VALUE":"23"}'+
                ',{"SCANID":10474,"LABEL":"MEDIUM","VALUE":"806"},{"SCANID":10474,"LABEL":"LOW","VALUE":"45"}'+
                ',{"SCANID":10474,"LABEL":"WARNING","VALUE":"22"}],"NAME":"ISSUES BY SEVERITY"}'+
                ',{"DATA":[{"SCANID":10474,"LABEL":"SCALABILITY","VALUE":"3"},'+
                '{"SCANID":10474,"LABEL":"PERFORMANCE","VALUE":"57"},'+
                '{"SCANID":10474,"LABEL":"MANAGEABILITY","VALUE":"793"},'+
                '{"SCANID":10474,"LABEL":"SECURITY","VALUE":"43"}],"NAME":"ISSUES BY AREA"},'+
                '{"DATA":[{"SCANID":10474,"LABEL":"MISSING APEXDOC COMMENT","VALUE":"277"},'+
                '{"SCANID":10474,"LABEL":"FINAL VARIABLES SHOULD BE FULLY CAPITALIZED AND NON-FINAL'+
                ' VARIABLES SHOULD NOT INCLUDE UNDERSCORES.","VALUE":"262"},{"SCANID":10474,'+
                '"LABEL":"AVOID PICKLIST FIELDS WITH TOO MANY VALUES","VALUE":"19"},{"SCANID":10474,'+
                '"LABEL":"AVOID EXCESSIVE STANDARD CYCLOMATIC COMPLEXITY.","VALUE":"18"},'+
                '{"SCANID":10474,"LABEL":"AVOID USING IF..ELSE STATEMENTS WITHOUT USING SURROUNDING BRACES.",'+
                '"VALUE":"15"},{"SCANID":10474,"LABEL":"ACCESS PERMISSIONS SHOULD BE CHECKED BEFORE A'+
                ' SOQL/SOSL/DML OPERATION.","VALUE":"15"},{"SCANID":10474,"LABEL":"AVOID CUSTOM FIELDS WITHOUT'+
                ' DESCRIPTION OR HELP TEXT","VALUE":"14"},{"SCANID":10474,"LABEL":"CLASS NAMES SHOULD ALWAYS'+
                ' BEGIN WITH AN UPPER CASE CHARACTER.","VALUE":"14"},{"SCANID":10474,"LABEL":"AVOID METHODS WITH'+
                ' EXCESSIVE LINES OF CODE COUNT.","VALUE":"14"},{"SCANID":10474,"LABEL":"AVOID OBJECTS WITHOUT'+
                ' INDEXED FIELDS","VALUE":"14"}],"NAME":"ISSUES BY BEST PRACTICE"},{"DATA":'+
                '[{"SCANID":10474,"LABEL":"N/A","VALUE":"896"},{"SCANID":10474,"LABEL":"COPADO","VALUE":"0"}],'+
                '"NAME":"ISSUES BY APPLICATION"},{"DATA":[{"SCANID":10474,"LABEL":"WWWWQ","VALUE":"841"},'+
                '{"SCANID":10474,"LABEL":"N/A","VALUE":"49"},{"SCANID":10474,"LABEL":"SALESFORCE.COM, INC.",'+
                '"VALUE":"6"}],"NAME":"ISSUES BY DEVELOPER"}],'+
                '"META":{"TOTAL_RESOURCES":90,"RESOURCES_PER_PAGE":10,"FROM":1,"TO":10}}');
                RES.SETSTATUSCODE(200);
                RETURN RES;
            } ELSE IF (REQ.GETENDPOINT().CONTAINS('/CES-BY-TYPE/')) {
                HTTPRESPONSE RES = NEW HTTPRESPONSE();
                RES.SETBODY('{"DATA":[{"DATA":[{"SCANID":10474,"LABEL":"CUSTOM FIELD","VALUE":"1009"},'+
                '{"SCANID":10474,"LABEL":"OBJECT","VALUE":"171"},{"SCANID":10474,"LABEL":"LAYOUT","VALUE":"49"},'+
                '{"SCANID":10474,"LABEL":"PROFILE","VALUE":"37"},{"SCANID":10474,"LABEL":"APEX CLASS","VALUE":"33"},'+
                '{"SCANID":10474,"LABEL":"ROLE","VALUE":"18"},{"SCANID":10474,"LABEL":"REPORT","VALUE":"11"},'+
                '{"SCANID":10474,"LABEL":"APEX PAGE","VALUE":"8"},{"SCANID":10474,"LABEL":"APEX TRIGGER","VALUE":"4"},'+
                '{"SCANID":10474,"LABEL":"PERMISSION SET","VALUE":"3"},'+
                '{"SCANID":10474,"LABEL":"INSTALLED PACKAGE","VALUE":"2"},'+
                '{"SCANID":10474,"LABEL":"REPORT TYPE","VALUE":"2"},'+
                '{"SCANID":10474,"LABEL":"SHARING RULES","VALUE":"2"},'+
                '{"SCANID":10474,"LABEL":"APPLICATION","VALUE":"1"},'+
                '{"SCANID":10474,"LABEL":"DASHBOARD","VALUE":"1"},'+
                '{"SCANID":10474,"LABEL":"WORKFLOW","VALUE":"1"},'+
                '{"SCANID":10474,"LABEL":"APEX COMPONENT","VALUE":"0"},'+
                '{"SCANID":10474,"LABEL":"APPROVAL PROCESS","VALUE":"0"},'+
                '{"SCANID":10474,"LABEL":"DUPLICATE","VALUE":"0"},'+
                '{"SCANID":10474,"LABEL":"EMAIL TEMPLATE","VALUE":"0"},'+
                '{"SCANID":10474,"LABEL":"FLOW","VALUE":"0"},'+
                '{"SCANID":10474,"LABEL":"GROUP","VALUE":"0"},{"SCANID":10474,"LABEL":"LIGHTNING","VALUE":"0"},'+
                '{"SCANID":10474,"LABEL":"NETWORK","VALUE":"0"},{"SCANID":10474,"LABEL":"ORG. CONFIG.","VALUE":"0"},'+
                '{"SCANID":10474,"LABEL":"STATIC RESOURCE","VALUE":"0"},'+
                '{"SCANID":10474,"LABEL":"WORKFLOW RULE","VALUE":"0"}],'+
                '"NAME":"NUMBER OF CONFIGURATION ELEMENTS BY TYPE"}]}');
                RES.SETSTATUSCODE(200);
                RETURN RES;
            } ELSE IF (REQ.GETENDPOINT().CONTAINS('/DATA-PRIVACY-COMPACT/')) {
                HTTPRESPONSE RES = NEW HTTPRESPONSE();
                RES.SETBODY('{"TREND":[{"DATA":[{"SCANID":10121,"LABEL":"2021-05-03T15:29:12Z","VALUE":"61"}'+
                ',{"SCANID":10168,"LABEL":"2021-05-11T15:11:39Z","VALUE":"61"},'+
                '{"SCANID":10179,"LABEL":"2021-05-13T11:01:05Z","VALUE":"61"},'+
                '{"SCANID":10474,"LABEL":"2021-07-01T09:40:55Z","VALUE":"18"}],'+
                '"NAME":"DATA PRIVACY"}],"VARIATION":-70.49,"INVERSEVARIATION":TRUE,"VALUE":18,"PREVSCAN":61,'+
                '"SENSITIVE":13,"EXTRASENSITIVE":0,"PRIVATEISSUES":0}');
                RES.SETSTATUSCODE(200);
                RETURN RES;
            } ELSE {
                SYSTEM.ASSERT(FALSE, 'UNEXPECTED ENDPOINT ' + REQ.GETENDPOINT());
                RETURN NULL;
            }
        }
    }

    @ISTEST
    STATIC VOID GIVENNOINSTANCERECORDS_WHENGETCHECKIFORGCONNECTED_THENFALSE(){
        DASHBOARDCONTROLLER CTRL = NEW DASHBOARDCONTROLLER();
        TEST.STARTTEST();
        BOOLEAN RESULT = CTRL.GETCHECKIFORGCONNECTED();
        TEST.STOPTEST();
        SYSTEM.ASSERTEQUALS(FALSE, RESULT);
    }

    @ISTEST
    STATIC VOID GIVENINSTANCERECORDWITHORGID_WHENGETCHECKIFORGCONNECTED_THENTRUE(){
        DASHBOARDCONTROLLER CTRL = NEW DASHBOARDCONTROLLER();
        STRING CURRENTORGID = USERINFO.GETORGANIZATIONID();
        INSTANCE__C INST = NEW INSTANCE__C();
        INST.INST_ORG_ID__C = CURRENTORGID;
        INST.ID__C = '54D54D';
        INSERT INST;
        TEST.STARTTEST();
        BOOLEAN RESULT = CTRL.GETCHECKIFORGCONNECTED();
        SYSTEM.ASSERTEQUALS(TRUE, RESULT);
        TEST.STOPTEST();
    }

    @ISTEST
    STATIC VOID GIVENNORECORDS_WHENGETDATA_THENNEWDATAWRAPPER(){
        QC_USER__C USER = NEW QC_USER__C(QC_VALID_UNTIL__C = DATE.TODAY().ADDMONTHS(1), USER__C = USERINFO.GETUSERID(), QC_ACTIVE__C = TRUE);
        UPSERT USER;

        DASHBOARDCONTROLLER CTRL = NEW DASHBOARDCONTROLLER();
        TEST.STARTTEST();            
        DASHBOARDCONTROLLER.DATAWRAPPER ACTUAL = CTRL.GETDATA();
            SYSTEM.ASSERTEQUALS( NULL, ACTUAL.NUMBERS);
            SYSTEM.ASSERTEQUALS( NULL, ACTUAL.CONFIGURATIONELEMENTSDATA);
            SYSTEM.ASSERTEQUALS( NULL, ACTUAL.EVOLUTIONOFISSUESDATA);
            SYSTEM.ASSERTEQUALS( NULL, ACTUAL.ISSUESBYBESTPRACTICESDATA);
            SYSTEM.ASSERTEQUALS( NULL, ACTUAL.ISSUESBYIMPACTAREADATA);
        TEST.STOPTEST();
    }

    @ISTEST
    STATIC VOID GIVENRECORDSLOADED_WHENGETDATA_THENOK(){
        DASHBOARDCONTROLLER CTRL = NEW DASHBOARDCONTROLLER();
        QC_USER__C USER = NEW QC_USER__C(QC_VALID_UNTIL__C = DATE.TODAY().ADDMONTHS(1), USER__C = USERINFO.GETUSERID(), QC_ACTIVE__C = TRUE);
        UPSERT USER;
        LIST<SOBJECT> LISTDASHBOARDDATA = TEST.LOADDATA(DASHBOARD_DATA__C.SOBJECTTYPE, 'TEST_DASHBOARD_DATA');
        LIST<SOBJECT> LISTCHART = TEST.LOADDATA(CHART__C.SOBJECTTYPE, 'TEST_CHART');
        LIST<SOBJECT> LISTDATASET = TEST.LOADDATA(DATASET__C.SOBJECTTYPE, 'TEST_DATASET');
        SYSTEM.ASSERTEQUALS( 2, LISTDASHBOARDDATA.SIZE());
        SYSTEM.ASSERTEQUALS( 12, LISTCHART.SIZE());
        SYSTEM.ASSERTEQUALS( 94, LISTDATASET.SIZE());

        TEST.STARTTEST();            
        DASHBOARDCONTROLLER.DATAWRAPPER ACTUAL = CTRL.GETDATA();
        SYSTEM.ASSERTEQUALS( 96, ACTUAL.NUMBERS.QOC__C );
        SYSTEM.ASSERT(NEW SET<DECIMAL>(ACTUAL.CONFIGURATIONELEMENTSDATA.VALUES).CONTAINS(171));
        SYSTEM.ASSERTEQUALS( '["CUSTOM FIELD","OBJECT","LAYOUT","PROFILE","APEX CLASS","ROLE","REPORT","APEX PAGE","APEX TRIGGER","OTHER 7 ITEMS"]', ACTUAL.CONFIGURATIONELEMENTSDATA.LABLES);
        SYSTEM.ASSERT(NEW SET<DECIMAL>(ACTUAL.ISSUESBYBESTPRACTICESDATA.VALUES).CONTAINS(277));
        SYSTEM.ASSERTEQUALS( '["MEDIUM","LOW","HIGH","WARNING"]', ACTUAL.ISSUESBYSEVERITYDATA.LABLES);
        SYSTEM.ASSERT(NEW SET<DECIMAL>(ACTUAL.ISSUESBYIMPACTAREADATA[0].VALUES).CONTAINS(793));
        SYSTEM.ASSERTEQUALS( '["MANAGEABILITY","PERFORMANCE","SECURITY","SCALABILITY"]', ACTUAL.ISSUESBYIMPACTAREADATA[0].LABLES);
        TEST.STOPTEST();
    }

    @ISTEST
    STATIC VOID GIVENMOCKOK_WHENUPDATEDATAFROMPORTAL_THENNEWRECORDSCREATED(){
        TEST.SETMOCK(HTTPCALLOUTMOCK.CLASS, NEW MOCKOK());
        DASHBOARDCONTROLLER CTRL = NEW DASHBOARDCONTROLLER();
        STRING CURRENTORGID = USERINFO.GETORGANIZATIONID();
        INSTANCE__C INST = NEW INSTANCE__C();
        INST.INST_ORG_ID__C = CURRENTORGID;
        INST.ID__C = '54D54D';
        INSERT INST;
        TEST.STARTTEST();
        PAGEREFERENCE RESULT = CTRL.UPDATEDATAFROMPORTAL();
        TEST.STOPTEST();
        INTEGER ACTUAL = [SELECT COUNT() FROM  DATASET__C];
        SYSTEM.ASSERTEQUALS(45, ACTUAL, 'NUMBER OF CREATED DATASET__C RECORDS IS NOT EQUAL TO 45');
    }

}